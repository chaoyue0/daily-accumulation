# Docker

## 基本概念

- 宿主机：安装 Docker 守护进程的 Linux 服务器
- 镜像 Image：相当于一个 root 文件系统，除了提供运行所需的程序、库、资源外，还包含运行时准备的配置参数，不会包含任何动态参数
- 仓库 Repository：镜像控制中心，用来保存镜像
- 容器： 镜像创建的运行实例，Docker 利用容器来运行应用，每个容器相互隔离（Docker 进程+镜像文件）

## 运行流程

### Docker 客户端

用于向 Docker 守护进程发起请求，包括 Docker 构建、拉取和启动

- 构建：根据 Docker 文件构建一个镜像存放于本地 Docker 主机
- 拉取：从云端镜像仓库拉取镜像到本地 Docker 主机或将本地镜像推送到远端镜像仓库
- 启动：将镜像安装至容器并启动容器

### Docker 主机

一个物理或者虚拟的机器用于执行 Docker 守护进程和容器

### Docker 守护进程

接收并处理 DOcker 客户端发送的请求，检测 Docker API 的请求和管理 Docker 对象（镜像、容器、网络和数据卷）

## 镜像

用来打包应用程序及其依赖项的独立运行时环境，包含了运行应用程序所需的所有文件系统内容、运行时库、环境变量和配置等

### 分层

- 基础镜像：仅仅包含操作系统
- 中间件镜像：如 redis 等数据库镜像
- 应用镜像：具体的应用服务

使用 Docker 构建镜像的时候，每一个命令都会在前一个命令的基础上形成一个新镜像层

### 特点

- 环境一致性：封装了应用程序所需的所有依赖项，消除了在不同环境中部署应用程序时可能遇到的依赖关系问题
- 轻量级：共享主机操作系统的内核，并且仅包含应用程序及其运行时依赖，这使得镜像易于传输和部署
- 可复用性
- 版本控制

## 容器

用来运行和管理应用程序的独立、轻量级的可执行软件包，提供了一个隔离的运行环境，其中应用程序和依赖被封装在一个独立的单元中
