## JavaScript

### 闭包
定义：指的是函数与其词法环境的组合，及闭包是指有权访问另一个函数作用域中的变量的函数

创建闭包：在以函数内部创建另一个函数并返回

#### 函数调用
当某个函数被调用时，会创建一个`执行环境`以及相应的`作用域链`，并且作用域链上包含使用argument和其他命名参数的值来初始化函数的`活动对象`，
外部函数的活动对象处于次级位置，依此类推直至作用域终点的全局执行环境

#### 函数参数arguments
定义：对应函数参数的类数组对象

特点：

- 除了length属性和索引元素访问之外没有任何Array属性
- typeof类型判断返回Object;Object.prototype.toString.call()返回[ object Arguments ]

属性：

- callee：指向参数所属的当前执行的函数，常表示匿名函数，`现在已被禁用`
- length：传递给函数的参数数量

#### 函数属性[[scopes]]
定义：属于函数的内部属性，无法访问到。存储的执行上下文对象的集合，该集合呈链式链接，即作用域链

顺序：函数内部访问的对象先从函数自己的作用域内部寻找，没有找到则从该函数的外层寻找，Global全局作用域属于最外层

#### 闭包的作用

- 可以读取函数内部的变量
- 让这些值始终保持在内存中

#### 闭包的特性

- 访问外部函数的变量：即使外部函数已经执行完毕
- 保护变量：闭包可以创建一个私有作用域，外部函数无法访问内部函数的变量，可以有效的保护变量，防止被外部访问和修改
- 延长变量的生命周期：闭包持有对外部函数作用域的引用，外部函数变量不会在函数执行完毕后被销毁

#### 闭包的解决方案

- 立即执行函数

会创建一个独立的作用域，通过使用立即执行函数，可以避免将变量泄露到全局作用域，同时可以创建一个私有的作用域
，来确保内部变量在函数外部不可访问

### 执行环境

定义：包含当前正在执行的代码、所使用的变量和函数，以及相关的作用域信息。可以理解为代码执行的上下文，
决定`代码`在运行过程中的`行为和访问的资源`

变量对象：与执行环境一一对应，环境中定义的所有变量和函数都定义在这个对象中；

活动对象：执行环境为`函数`的变量对象

#### 作用域

定义：代码中定义`变量`的可访问范围，规定了在何处以及如何查找变量，决定了`变量的可见性和生命周期`

#### 作用域链

定义：当前执行环境的变量对象和所有外部环境的变量对象组成的链式结构

作用：保证对环境有权访问的所有变量和函数的`有序访问`

### 垃圾回收
在js中，所需内存的分配以及无用内存的回收完全实现了`自动管理`，对于`不可达`的内存会被垃圾回收机制清除

可达性：以某种方式可以访问或者可以用到的值，一定是存储在内存中的

孤岛：一组相互引用的对象，但是外部没有对其他对象的引用，这组对象也是不可达的，会从内存中被删除

#### 标记清除

当变量进入环境，给变量标记为"进入环境"，从逻辑上讲，不能释放进入环境的变量所占用的内存。而当变量离开环境时，
则将其标记为"离开环境"

#### 引用计数

当声明了一个变量并将一个引用类型值赋给该变量时，这个变量的引用次数就是1，如果该变量又被赋给另一个变量，则
这个变量的引用次数再加1。如果这个引用次数变成0，那么就说明无法访问到这个值，因此就可以被垃圾回收机制回收；