# 错误处理和调试

## 错误类型
### Error
基本类型其他错误类型都继承该类型，所有的错误类型都共享相同的属性，常用于开发者抛出自定义错误

### InternalError
会在底层js引擎抛出异常时由浏览器抛出，如递归过多导致栈溢出

### EvalError
会在使用eval()函数发生异常时抛出

    eval()函数：将传入的字符串当做js代码进行执行，返回字符串中代码的返回值，如果返回值为空，则返回undefined
    注意：不建议使用eval函数，采用Window.Function来代替，既能提升效率也能保证安全性

### RangeError
会在数值越界时抛出，如定义数组时设置了并不支持的长度

### ReferenceError
会在找不到对象时抛出，如访问不存在的变量而导致

### SyntaxError
会在给eval函数传入的字符串包含js语法错误时抛出

### TypeError
会在变量不是预期类型时抛出，或访问不存在的方法，如在给函数传参之前没有验证其类型的情况下，会抛出类型错误

### URIError
只会在encodeURI()和decodeURI()但传入了错误歌是的URI时抛出

## 错误处理
### try / catch 语句
常用于自己无法控制的错误上，例如引入了一个库，该库可能会存在错误，由于无法修改库代码，为了防止函数报告错误，针对可能的错误进行处理

### throw 操作符
用于在任何时候抛出自定义错误，该操作符必须有一个值，但值的类型不限

    在实际编写js代码时，应评估每一个函数，以及可能导致它们失败的情形。良好的错误处理协议可以保证只会发生你自己抛出的错误

### error事件
任何没有被try/catch语句处理的错误都会在window对象上触发error事件，在`onerror`事件处理程序中，任何浏览器都不会传入event事件，
而是传入3个参数：`错误消息`、`发生错误的URL`和`行号`

可以返回false来阻止浏览器默认报告错误的行为
```typescript
window.onerror = (message, url, line) => {
 console.log(message);
 return false;
}; 
```

## 错误处理策略
### 识别错误
识别错误可能会在代码中的什么地方发生，因为js是松散类型，不会验证函数参数，所以很多错误只有在代码真正运行起来才会出现

### 类别
#### 类型转换错误
主要原因是使用了会`自动改变某个值的数据类型`的操作符或语言构造，如使用`==`和`!=`操作符，以及在`if`、`for`、`while`等流控制语句中使用了`非布尔值`，
经常会导致类型转换错误

#### 数据类型错误
因为js是松散类型，所以变量和函数参数都不能保证会使用正确的数据类型，开发者需要自己检查数据类型，确保不会发生错误，常发生于将意外的值
传给函数

#### 通信错误
由于URL格式或发送的数据格式不正确而抛出错误

### 区分重大和非重大错误

#### 非重大错误

- 不会影响用户的主要任务
- 只会影响页面中的某个部分
- 可以恢复
- 重复操作可能成功

#### 重大错误

- 应用程序绝对无法继续运行
- 错误严重影响了用户的主要目标
- 会导致其他错误发生


    当重大错误发生时，应该立即发送消息让用户知晓自己不能再继续使用应用程序了
    在for循环中使用try/catch语句，可以每个模块的错误变成非重大错误，如果代码中错误发生可以单独处理，不会影响用户体验

### 错误记录到服务器
建立中心化的错误日志存储和跟踪系统

## 调试技术
